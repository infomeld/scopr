package proxypool

import (
	"fmt"
	"net/http"
	"net/url"
	"time"
)

type Proxy struct {
	Url string
}

// 检查代理的可用性
func (p *Proxy) check() bool {
	test_url := "http://httpbin.org/get"

	// 创建代理url
	proxy, err := url.Parse(p.Url)
	if err != nil {
		// log.Println(err)
		return false
	}

	// 设置http客户端
	client := &http.Client{
		Transport: &http.Transport{
			Proxy: http.ProxyURL(proxy),
		},
		Timeout: time.Second * 5, // 设置超时时间
	}

	// 发起请求
	resp, err := client.Get(test_url)
	if err != nil {
		// log.Println(err)
		return false
	}

	defer resp.Body.Close()

	// 检查http相应的状态码
	if resp.StatusCode != http.StatusOK {
		// log.Println("status code:", resp.StatusCode)
		return false
	}

	return true
}

func main() {

	var ip_list = []string{
		"http://Free proxies from free-proxy-list.net",
		"http://Updated at 2024-03-04 17:12:02 UTC.",
		"http://",
		"http://114.129.2.82:8081",
		"http://189.240.60.171:9090",
		"http://103.166.141.74:20074",
		"http://213.202.230.241:80",
		"http://37.97.201.252:80",
		"http://219.93.101.60:80",
		"http://49.249.155.3:80",
		"http://65.108.9.181:80",
		"http://198.199.86.11:8080",
		"http://20.111.54.16:8123",
		"http://162.223.89.84:80",
		"http://138.91.159.185:80",
		"http://162.223.94.164:80",
		"http://198.168.189.54:80",
		"http://104.250.117.6:7070",
		"http://51.15.242.202:8888",
		"http://43.156.0.125:8888",
		"http://200.19.177.120:80",
		"http://103.163.51.254:80",
		"http://182.253.115.130:8080",
		"http://20.24.43.214:80",
		"http://20.206.106.192:80",
		"http://47.56.110.204:8989",
		"http://50.174.214.217:80",
		"http://50.223.239.190:80",
		"http://50.173.182.90:80",
		"http://201.148.32.162:80",
		"http://64.201.163.133:80",
		"http://50.174.214.223:80",
		"http://213.33.2.27:80",
		"http://50.230.222.202:80",
		"http://93.117.225.195:80",
		"http://189.202.188.149:80",
		"http://50.174.214.219:80",
		"http://50.223.239.185:80",
		"http://50.200.12.83:80",
		"http://50.174.214.220:80",
		"http://50.223.239.166:80",
		"http://96.113.159.162:80",
		"http://50.174.214.216:80",
		"http://20.210.113.32:80",
		"http://50.231.172.74:80",
		"http://67.43.236.18:22645",
		"http://50.207.199.86:80",
		"http://195.114.209.50:80",
		"http://50.223.246.226:80",
		"http://50.174.216.110:80",
		"http://50.172.227.202:80",
		"http://0.0.0.0:80",
		"http://50.172.75.122:80",
		"http://50.172.75.124:80",
		"http://50.174.145.9:80",
		"http://50.174.145.10:80",
		"http://50.169.37.50:80",
		"http://4.144.136.15:80",
		"http://50.175.212.72:80",
		"http://213.33.2.28:80",
		"http://50.175.212.79:80",
		"http://50.174.145.13:80",
		"http://41.207.187.178:80",
		"http://154.208.10.126:80",
		"http://50.172.75.126:80",
		"http://50.221.230.186:80",
		"http://50.174.7.162:80",
		"http://152.67.10.190:8100",
		"http://50.168.163.179:80",
		"http://50.239.72.17:80",
		"http://50.174.7.154:80",
		"http://50.204.190.234:80",
		"http://50.173.140.144:80",
		"http://50.231.110.26:80",
		"http://62.99.138.162:80",
		"http://85.8.68.2:80",
		"http://50.218.57.74:80",
		"http://50.218.57.66:80",
		"http://133.18.234.13:80",
		"http://50.217.226.47:80",
		"http://18.228.198.164:80",
		"http://50.207.199.84:80",
		"http://50.174.145.8:80",
		"http://50.173.140.148:80",
		"http://50.207.199.80:80",
		"http://50.173.140.145:80",
		"http://213.33.126.130:80",
		"http://50.168.72.118:80",
		"http://50.207.199.85:80",
		"http://155.138.197.162:80",
		"http://50.170.90.25:80",
		"http://50.237.207.186:80",
		"http://50.170.90.30:80",
		"http://50.170.152.187:80",
		"http://80.150.50.226:80",
		"http://222.109.192.34:8080",
		"http://50.207.199.83:80",
		"http://85.26.146.169:80",
		"http://50.168.72.115:80",
		"http://50.217.226.41:80",
		"http://50.172.23.10:80",
		"http://50.169.135.10:80",
		"http://50.217.226.42:80",
		"http://195.23.57.78:80",
		"http://144.217.131.61:3148",
		"http://192.99.182.243:3128",
		"http://209.126.6.159:80",
		"http://13.81.217.201:80",
		"http://183.88.186.189:8080",
		"http://85.214.107.177:80",
		"http://52.196.1.182:80",
		"http://20.205.61.143:80",
		"http://50.200.12.82:80",
		"http://50.174.214.221:80",
		"http://50.145.6.36:80",
		"http://50.200.12.86:80",
		"http://77.48.244.78:80",
		"http://50.223.239.183:80",
		"http://4.236.183.37:8080",
		"http://50.174.7.158:80",
		"http://50.170.90.26:80",
		"http://51.145.176.250:8080",
		"http://50.175.212.66:80",
		"http://50.222.245.40:80",
		"http://116.203.28.43:80",
		"http://50.175.212.74:80",
		"http://160.16.65.167:80",
		"http://50.174.145.15:80",
		"http://50.168.210.226:80",
		"http://50.172.75.120:80",
		"http://50.172.75.121:80",
		"http://50.170.90.29:80",
		"http://50.172.39.98:80",
		"http://50.168.210.239:80",
		"http://50.223.38.6:80",
		"http://50.222.245.43:80",
		"http://211.128.96.206:80",
		"http://50.169.23.170:80",
		"http://50.172.75.123:80",
		"http://68.185.57.66:80",
		"http://50.168.89.184:80",
		"http://50.174.7.153:80",
		"http://190.58.248.86:80",
		"http://50.174.7.156:80",
		"http://50.168.72.116:80",
		"http://50.174.7.152:80",
		"http://50.220.168.134:80",
		"http://82.119.96.254:80",
		"http://50.168.163.177:80",
		"http://50.218.57.65:80",
		"http://50.174.7.157:80",
		"http://50.239.72.18:80",
		"http://43.128.107.251:8888",
		"http://34.154.161.152:80",
		"http://35.185.196.38:3128",
		"http://50.207.199.82:80",
		"http://50.170.90.24:80",
		"http://123.30.154.171:7777",
		"http://50.207.199.87:80",
		"http://89.36.114.38:80",
		"http://50.170.90.27:80",
		"http://50.173.140.151:80",
		"http://80.228.235.6:80",
		"http://50.168.163.181:80",
		"http://50.168.163.166:80",
		"http://47.74.152.29:8888",
		"http://50.200.12.85:80",
		"http://50.200.12.87:80",
		"http://50.217.29.198:80",
		"http://50.200.12.80:80",
		"http://46.47.197.210:3128",
		"http://43.251.213.62:84",
		"http://43.245.93.193:53805",
		"http://218.255.187.60:80",
		"http://83.136.219.140:80",
		"http://50.145.6.38:80",
		"http://50.172.75.127:80",
		"http://50.169.118.209:80",
		"http://114.156.77.107:8080",
		"http://50.122.86.118:80",
		"http://50.222.245.42:80",
		"http://50.168.72.122:80",
		"http://37.156.28.43:3128",
		"http://50.168.7.250:80",
		"http://50.222.245.44:80",
		"http://213.143.113.82:80",
		"http://50.168.72.119:80",
		"http://50.239.72.19:80",
		"http://66.191.31.158:80",
		"http://50.222.245.41:80",
		"http://50.222.245.47:80",
		"http://50.173.140.149:80",
		"http://50.204.219.226:80",
		"http://50.173.140.138:80",
		"http://50.217.226.45:80",
		"http://93.171.220.229:8888",
		"http://50.170.90.31:80",
		"http://50.221.74.130:80",
		"http://50.168.163.183:80",
		"http://50.170.90.28:80",
		"http://178.128.113.118:23128",
		"http://50.170.90.34:80",
		"http://172.232.111.247:80",
		"http://50.217.226.40:80",
		"http://50.204.219.227:80",
		"http://50.239.72.16:80",
		"http://50.204.219.230:80",
		"http://50.202.75.26:80",
		"http://50.174.7.155:80",
		"http://172.232.97.182:80",
		"http://50.174.7.159:80",
		"http://181.13.232.98:999",
		"http://20.204.43.57:80",
		"http://124.83.74.218:8082",
		"http://117.54.114.103:80",
		"http://174.138.94.117:80",
		"http://108.170.12.10:80",
		"http://39.109.113.97:3128",
		"http://198.49.68.80:80",
		"http://216.137.184.253:80",
		"http://117.54.114.101:80",
		"http://50.168.163.176:80",
		"http://189.240.60.169:9090",
		"http://103.75.117.85:80",
		"http://198.44.255.3:80",
		"http://47.88.3.19:8080",
		"http://50.217.226.44:80",
		"http://50.217.226.46:80",
		"http://50.204.219.224:80",
		"http://143.208.152.60:3180",
		"http://113.253.13.234:80",
		"http://103.178.194.123:1111",
		"http://103.148.44.221:8882",
		"http://138.68.225.200:80",
		"http://64.227.134.208:80",
		"http://190.103.177.131:80",
		"http://117.54.114.96:80",
		"http://50.200.12.84:80",
		"http://50.172.218.160:80",
		"http://50.173.140.150:80",
		"http://50.222.245.50:80",
		"http://34.135.203.172:3128",
		"http://68.188.59.198:80",
		"http://50.218.57.70:80",
		"http://50.204.219.228:80",
		"http://50.207.199.81:80",
		"http://127.0.0.7:80",
		"http://24.205.201.186:80",
		"http://156.244.64.221:40161",
		"http://61.19.145.66:8080",
		"http://103.159.194.249:8080",
		"http://115.127.65.67:8080",
		"http://190.61.45.157:999",
		"http://157.119.222.108:8080",
		"http://198.199.83.206:8000",
		"http://185.165.46.208:3128",
		"http://47.74.226.8:5001",
		"http://103.127.1.130:80",
		"http://78.28.152.111:80",
		"http://96.113.158.126:80",
		"http://72.10.164.178:10801",
		"http://50.174.145.14:80",
		"http://50.173.140.147:80",
		"http://50.168.163.182:80",
		"http://50.218.224.35:80",
		"http://188.166.17.18:8881",
		"http://50.173.140.146:80",
		"http://50.172.218.164:80",
		"http://50.174.214.222:80",
		"http://50.171.68.130:80",
		"http://50.222.245.46:80",
		"http://50.168.163.178:80",
		"http://50.218.57.71:80",
		"http://50.218.57.68:80",
		"http://50.204.219.225:80",
		"http://8.219.97.248:80",
		"http://50.231.104.58:80",
		"http://172.245.159.177:80",
		"http://50.168.72.113:80",
		"http://50.218.57.69:80",
		"http://50.204.219.231:80",
		"http://50.168.72.112:80",
		"http://38.140.163.42:80",
		"http://188.166.222.236:3128",
		"http://70.186.128.126:8080",
		"http://138.121.161.86:8190",
		"http://38.156.73.50:8080",
		"http://103.180.118.5:8888",
		"http://110.49.34.126:32650",
		"http://67.43.228.254:32221",
		"http://72.10.160.173:10677",
		"http://170.64.222.86:8000",
		"http://159.65.77.168:8585",
		"http://72.10.160.174:22669",
		"http://84.39.112.144:3128",
		"http://181.41.194.186:80",
		"http://103.152.232.217:8181",
		"http://38.242.244.29:80",
		"http://111.95.40.244:8080",
		"http://180.191.254.10:8081",
		"http://80.87.178.175:8080",
		"http://138.68.60.8:3128",
		"http://128.199.202.122:8080",
	}

	for _, i := range ip_list {

		var new_proxies = Proxy{Url: i}
		if new_proxies.check() {
			fmt.Println(i)
		}
	}

}
